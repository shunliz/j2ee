# 高并发原则：

无状态

拆分

服务化

消息队列

数据异构

缓存银弹

并发化

# 高可用原则：

降级

限流

切流量

可回滚

# 业务设计原则：

防重设计

幂等设计

流程可定义

状态与状态机

后台系统操作课反馈

后台系统审批化

文档和注释

备份

# 负载均衡：

nginx的四层负载均衡

静态负载均衡

动态负载均衡

# 隔离

线程隔离

进程隔离

集群隔离

机房隔离

读写隔离

静态隔离

爬虫隔离

热点隔离

资源隔离

hystrix隔离

servlet3 隔离

# 限流

令牌桶算法：限制平均流入速率，允许一定程度的突发，

漏桶算法： 限制平均流出速率，平滑流入速率

简单粗暴限流：直接总数或者流量超过阈值就限流

降级：

自动开关降级：超时，失败次数超过阈值，故障，限流后自动降级

手工降级： 人工开关降级

读服务降级：

写服务降级

多级降级

通过配置中心配置降级开关

hystrix熔断机制

# 超时重试机制

业务链上从前端，代理，web容器，中间件，数据库，NoSQL，业务都需要考虑超时重试机制。

对于写服务，需要谨慎采用重试机制，除非借口幂等。防止写服务超时重试行程DDOS

# 回滚机制

事务回滚

代码库回滚

部署版本回滚

数据版本回滚

静态资源回滚

# 压测与预案

# 缓存

缓存回收策略：基于空间，基于容量，基于时间，基于java对象引用

回收算法：FIFO，LRU，LFU

缓存使用模式：

Cache-Aside:存在并发更新的可能。

Cache-As-SoR: read through 业务代码先调用cache不中在由cache回源SoR, write through, write behind

# HTTP 缓存

Last-modified

ETag

# 多级缓存

nginx本地缓存用来解决热点缓存问题

分布式缓存用来减少访问回源率

tomcat堆缓存用来防止相关缓存失效、崩溃之后的冲击

写缓存不能放到数据库事务中，影响并发性能

# 连接池线程池

数据库连接池

httpclient连接池

线程池

# 异步并发实战

Future

Callback

CompletableFuture



# 扩容



